{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { Tron } from \"./tron\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { ArgType } from \"reactotron-core-client\";\nimport { onSnapshot } from \"mobx-state-tree\";\nimport { DEFAULT_REACTOTRON_CONFIG } from \"./reactotron-config\";\nimport { mst } from \"reactotron-mst\";\nimport { clear } from \"../../utils/storage\";\nimport { goBack, resetRoot, navigate } from \"../../navigators/navigation-utilities\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\n\nvar noop = function noop() {\n  return undefined;\n};\n\nif (__DEV__) {\n  console.tron = Tron;\n} else {\n  console.tron = {\n    benchmark: noop,\n    clear: noop,\n    close: noop,\n    configure: noop,\n    connect: noop,\n    display: noop,\n    error: noop,\n    image: noop,\n    log: noop,\n    logImportant: noop,\n    onCustomCommand: noop,\n    overlay: noop,\n    reportError: noop,\n    send: noop,\n    startTimer: noop,\n    storybookSwitcher: noop,\n    use: noop,\n    useReactNative: noop,\n    warn: noop\n  };\n}\n\nexport var Reactotron = function () {\n  function Reactotron() {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_REACTOTRON_CONFIG;\n\n    _classCallCheck(this, Reactotron);\n\n    this.config = _objectSpread(_objectSpread({\n      host: \"localhost\",\n      useAsyncStorage: true\n    }, config), {}, {\n      state: _objectSpread({\n        initial: false,\n        snapshots: false\n      }, config && config.state)\n    });\n  }\n\n  _createClass(Reactotron, [{\n    key: \"setRootStore\",\n    value: function setRootStore(rootStore, initialData) {\n      if (__DEV__) {\n        rootStore = rootStore;\n        this.rootStore = rootStore;\n        var _this$config$state = this.config.state,\n            initial = _this$config$state.initial,\n            snapshots = _this$config$state.snapshots;\n        var name = \"ROOT STORE\";\n\n        if (initial) {\n          console.tron.display({\n            name: name,\n            value: initialData,\n            preview: \"Initial State\"\n          });\n        }\n\n        if (snapshots) {\n          onSnapshot(rootStore, function (snapshot) {\n            console.tron.display({\n              name: name,\n              value: snapshot,\n              preview: \"New State\"\n            });\n          });\n        }\n\n        console.tron.trackMstNode(rootStore);\n      }\n    }\n  }, {\n    key: \"setup\",\n    value: function setup() {\n      var RX;\n      return _regeneratorRuntime.async(function setup$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (__DEV__) {\n                Tron.configure({\n                  name: this.config.name || require(\"../../../package.json\").name,\n                  host: this.config.host\n                });\n\n                if (Platform.OS !== \"web\") {\n                  if (this.config.useAsyncStorage) {\n                    Tron.setAsyncStorageHandler(AsyncStorage);\n                  }\n\n                  Tron.useReactNative({\n                    asyncStorage: this.config.useAsyncStorage ? undefined : false\n                  });\n                }\n\n                RX = /postProcessSnapshot|@APPLY_SNAPSHOT/;\n                Tron.use(mst({\n                  filter: function filter(event) {\n                    return RX.test(event.name) === false;\n                  }\n                }));\n                Tron.connect();\n                Tron.onCustomCommand({\n                  title: \"Reset Root Store\",\n                  description: \"Resets the MST store\",\n                  command: \"resetStore\",\n                  handler: function handler() {\n                    console.tron.log(\"resetting store\");\n                    clear();\n                  }\n                });\n                Tron.onCustomCommand({\n                  title: \"Reset Navigation State\",\n                  description: \"Resets the navigation state\",\n                  command: \"resetNavigation\",\n                  handler: function handler() {\n                    console.tron.log(\"resetting navigation state\");\n                    resetRoot({\n                      index: 0,\n                      routes: []\n                    });\n                  }\n                });\n                Tron.onCustomCommand({\n                  command: \"navigateTo\",\n                  handler: function handler(args) {\n                    var route = args.route;\n\n                    if (route) {\n                      console.log(\"Navigating to: \" + route);\n                      navigate(route);\n                    } else {\n                      console.log(\"Could not navigate. No route provided.\");\n                    }\n                  },\n                  title: \"Navigate To Screen\",\n                  description: \"Navigates to a screen by name.\",\n                  args: [{\n                    name: \"route\",\n                    type: ArgType.String\n                  }]\n                });\n                Tron.onCustomCommand({\n                  title: \"Go Back\",\n                  description: \"Goes back\",\n                  command: \"goBack\",\n                  handler: function handler() {\n                    console.tron.log(\"Going back\");\n                    goBack();\n                  }\n                });\n\n                if (this.config.clearOnLoad) {\n                  Tron.clear();\n                }\n              }\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }]);\n\n  return Reactotron;\n}();","map":{"version":3,"sources":["/Users/trevorcoleman/dev/trevor-coleman/EmmenthalCloud/app/services/reactotron/reactotron.ts"],"names":["Tron","AsyncStorage","ArgType","onSnapshot","DEFAULT_REACTOTRON_CONFIG","mst","clear","goBack","resetRoot","navigate","noop","undefined","__DEV__","console","tron","benchmark","close","configure","connect","display","error","image","log","logImportant","onCustomCommand","overlay","reportError","send","startTimer","storybookSwitcher","use","useReactNative","warn","Reactotron","config","host","useAsyncStorage","state","initial","snapshots","rootStore","initialData","name","value","preview","snapshot","trackMstNode","require","Platform","OS","setAsyncStorageHandler","asyncStorage","RX","filter","event","test","title","description","command","handler","index","routes","args","route","type","String","clearOnLoad"],"mappings":"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","sourcesContent":["import { Tron } from \"./tron\"\nimport AsyncStorage from \"@react-native-async-storage/async-storage\"\nimport { ArgType } from \"reactotron-core-client\"\nimport { RootStore } from \"../../models/root-store/root-store\"\nimport { onSnapshot } from \"mobx-state-tree\"\nimport { ReactotronConfig, DEFAULT_REACTOTRON_CONFIG } from \"./reactotron-config\"\nimport { mst } from \"reactotron-mst\"\nimport { clear } from \"../../utils/storage\"\nimport { goBack, resetRoot, navigate } from \"../../navigators/navigation-utilities\"\nimport { Platform } from \"react-native\"\n\n// Teach TypeScript about the bad things we want to do.\ndeclare global {\n  interface Console {\n    /**\n     * Hey, it's Reactotron if we're in dev, and no-ops if we're in prod.\n     */\n    tron: typeof Tron\n  }\n}\n\n/** Do Nothing. */\nconst noop = () => undefined\n\n// in dev, we attach Reactotron, in prod we attach a interface-compatible mock.\nif (__DEV__) {\n  console.tron = Tron // attach reactotron to `console.tron`\n} else {\n  // attach a mock so if things sneaky by our __DEV__ guards, we won't crash.\n  console.tron = {\n    benchmark: noop,\n    clear: noop,\n    close: noop,\n    configure: noop,\n    connect: noop,\n    display: noop,\n    error: noop,\n    image: noop,\n    log: noop,\n    logImportant: noop,\n    onCustomCommand: noop,\n    overlay: noop,\n    reportError: noop,\n    send: noop,\n    startTimer: noop,\n    storybookSwitcher: noop,\n    use: noop,\n    useReactNative: noop,\n    warn: noop,\n  }\n}\n\n/**\n * You'll probably never use the service like this since we hang the Reactotron\n * instance off of `console.tron`. This is only to be consistent with the other\n * services.\n */\nexport class Reactotron {\n  config: ReactotronConfig\n\n  rootStore: any\n\n  /**\n   * Create the Reactotron service.\n   *\n   * @param config the configuration\n   */\n  constructor(config: ReactotronConfig = DEFAULT_REACTOTRON_CONFIG) {\n    // merge the passed in config with some defaults\n    this.config = {\n      host: \"localhost\",\n      useAsyncStorage: true,\n      ...config,\n      state: {\n        initial: false,\n        snapshots: false,\n        ...(config && config.state),\n      },\n    }\n  }\n\n  /**\n   * Hook into the root store for doing awesome state-related things.\n   *\n   * @param rootStore The root store\n   */\n  setRootStore(rootStore: any, initialData: any) {\n    if (__DEV__) {\n      rootStore = rootStore as RootStore // typescript hack\n      this.rootStore = rootStore\n\n      const { initial, snapshots } = this.config.state\n      const name = \"ROOT STORE\"\n\n      // logging features\n      if (initial) {\n        console.tron.display({ name, value: initialData, preview: \"Initial State\" })\n      }\n      // log state changes?\n      if (snapshots) {\n        onSnapshot(rootStore, (snapshot) => {\n          console.tron.display({ name, value: snapshot, preview: \"New State\" })\n        })\n      }\n\n      console.tron.trackMstNode(rootStore)\n    }\n  }\n\n  /**\n   * Configure reactotron based on the the config settings passed in, then connect if we need to.\n   */\n  async setup() {\n    // only run this in dev... metro bundler will ignore this block: 🎉\n    if (__DEV__) {\n      // configure reactotron\n      Tron.configure({\n        name: this.config.name || require(\"../../../package.json\").name,\n        host: this.config.host,\n      })\n\n      // hookup middleware\n      if (Platform.OS !== \"web\") {\n        if (this.config.useAsyncStorage) {\n          Tron.setAsyncStorageHandler(AsyncStorage)\n        }\n        Tron.useReactNative({\n          asyncStorage: this.config.useAsyncStorage ? undefined : false,\n        })\n      }\n\n      // ignore some chatty `mobx-state-tree` actions\n      const RX = /postProcessSnapshot|@APPLY_SNAPSHOT/\n\n      // hookup mobx-state-tree middleware\n      Tron.use(\n        mst({\n          filter: (event) => RX.test(event.name) === false,\n        }),\n      )\n\n      // connect to the app\n      Tron.connect()\n\n      // Register Custom Commands\n      Tron.onCustomCommand({\n        title: \"Reset Root Store\",\n        description: \"Resets the MST store\",\n        command: \"resetStore\",\n        handler: () => {\n          console.tron.log(\"resetting store\")\n          clear()\n        },\n      })\n\n      Tron.onCustomCommand({\n        title: \"Reset Navigation State\",\n        description: \"Resets the navigation state\",\n        command: \"resetNavigation\",\n        handler: () => {\n          console.tron.log(\"resetting navigation state\")\n          resetRoot({ index: 0, routes: [] })\n        },\n      })\n\n      Tron.onCustomCommand({\n        command: \"navigateTo\",\n        handler: (args) => {\n          const { route } = args\n          if (route) {\n            console.log(`Navigating to: ${route}`)\n            navigate(route)\n          } else {\n            console.log(\"Could not navigate. No route provided.\")\n          }\n        },\n        title: \"Navigate To Screen\",\n        description: \"Navigates to a screen by name.\",\n        args: [\n          {\n            name: \"route\",\n            type: ArgType.String,\n          },\n        ],\n      })\n\n      Tron.onCustomCommand({\n        title: \"Go Back\",\n        description: \"Goes back\",\n        command: \"goBack\",\n        handler: () => {\n          console.tron.log(\"Going back\")\n          goBack()\n        },\n      })\n\n      // clear if we should\n      if (this.config.clearOnLoad) {\n        Tron.clear()\n      }\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}